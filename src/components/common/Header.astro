---
import Container from './Container.astro';
import Button from './Button.astro';
import { NAVIGATION } from '../../config';

const navItems = NAVIGATION.main;
---

<header class="sticky top-0 z-50 bg-white/95 dark:bg-gray-900/95 border-b border-gray-200 dark:border-gray-800 backdrop-blur-md shadow-sm">
  <Container>
    <div class="py-4 flex justify-between items-center">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2 group">
        <div class="w-10 h-10 bg-gradient-to-br from-greenberry-50 to-greenberry-100 dark:from-greenberry-900/30 dark:to-greenberry-800/30 rounded-lg flex items-center justify-center text-greenberry-600 dark:text-greenberry-400 group-hover:scale-110 transition-transform duration-300 shadow-sm">
          <i class="fa-solid fa-leaf text-xl"></i>
        </div>
        <span class="font-bold text-xl text-gray-900 dark:text-white">
          <span class="text-greenberry-600 dark:text-greenberry-400">Green</span>berry
        </span>
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center gap-8">
        {navItems.map(item => (
          <a 
            href={item.href} 
            class="font-medium text-gray-700 hover:text-greenberry-600 dark:text-gray-200 dark:hover:text-greenberry-400 transition-colors relative group py-1"
          >
            {item.name}
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-greenberry-500 group-hover:w-full transition-all duration-300"></span>
          </a>
        ))}
        <div class="flex items-center gap-4 ml-4">
          <a 
            href="/customer-portal" 
            class="px-4 py-2 text-sm rounded-md border-2 border-greenberry-600 text-greenberry-600 hover:bg-greenberry-50 dark:border-greenberry-500 dark:text-greenberry-400 dark:hover:bg-gray-800 font-medium transition-colors"
          >
            Customer Portal
          </a>
          <Button href="/contact" variant="primary" size="sm">
            Get Started
            <span class="ml-1 opacity-80">â†’</span>
          </Button>
        </div>
      </nav>

      <!-- Mobile menu toggle -->
      <button 
        id="menu-toggle"
        class="md:hidden p-2 text-gray-600 hover:text-greenberry-600 rounded-lg hover:bg-gray-100 focus:outline-none dark:text-gray-300 dark:hover:bg-gray-800 transition-colors"
        aria-label="Toggle mobile menu"
      >
        <i id="menu-icon" class="fa-solid fa-bars text-xl"></i>
      </button>
    </div>
  </Container>

  <!-- Mobile Navigation (Hidden by default) -->
  <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800">
    <Container>
      <div class="py-6 space-y-6">
        <nav class="flex flex-col space-y-5">
          {navItems.map(item => (
            <a 
              href={item.href} 
              class="font-medium text-gray-800 hover:text-greenberry-600 dark:text-gray-200 dark:hover:text-greenberry-400 transition-colors text-lg px-1 flex items-center"
            >
              {item.name}
              <span class="ml-auto text-gray-400 text-sm">
                <i class="fa-solid fa-chevron-right"></i>
              </span>
            </a>
          ))}
        </nav>
        <div class="flex flex-col gap-3 pt-5 border-t border-gray-100 dark:border-gray-800">
          <a 
            href="/customer-portal" 
            class="px-4 py-3 rounded-md border-2 border-greenberry-600 text-greenberry-600 hover:bg-greenberry-50 dark:border-greenberry-500 dark:text-greenberry-400 dark:hover:bg-gray-800 font-medium transition-colors text-center"
          >
            Customer Portal
          </a>
          <Button href="/contact" variant="primary" size="md" block={true}>
            Get Started
            <i class="fa-solid fa-arrow-right ml-2"></i>
          </Button>
        </div>
      </div>
    </Container>
  </div>
</header>

<script>
  // Mobile menu toggle
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');

  if (menuToggle && mobileMenu && menuIcon) {
    menuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      
      // Toggle icon between bars and x
      if (menuIcon.classList.contains('fa-bars')) {
        menuIcon.classList.remove('fa-bars');
        menuIcon.classList.add('fa-xmark');
      } else {
        menuIcon.classList.remove('fa-xmark');
        menuIcon.classList.add('fa-bars');
      }
    });
  }
</script>